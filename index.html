<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Princess Warrior Quest</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; overflow: hidden; background: #fce4ec; }
    canvas { display: block; margin: auto; background: linear-gradient(to top, #ffe0f0, #ffccdd); }
    .controls {
      position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
      display: flex; gap: 20px; z-index: 100;
    }
    button {
      width: 60px; height: 60px;
      background: #ff99bb;
      border: none; border-radius: 50%;
      font-size: 24px; color: white;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="800" height="450"></canvas>
  <div class="controls">
    <button id="left">⯇</button>
    <button id="jump">⭡</button>
    <button id="right">⯈</button>
  </div>
  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    const princess = {
      x: 100, y: 300, width: 40, height: 60,
      color: '#ff69b4',
      vx: 0, vy: 0,
      speed: 3, jumpStrength: -10,
      onGround: false
    };

    const keys = { left: false, right: false, jump: false };

    const gravity = 0.5;
    const platforms = [
      { x: 0, y: 400, width: 1200, height: 50 },
      { x: 300, y: 330, width: 120, height: 20 },
      { x: 500, y: 270, width: 100, height: 20 },
    ];

    function drawPrincess() {
      ctx.fillStyle = princess.color;
      ctx.fillRect(princess.x, princess.y, princess.width, princess.height);
    }

    function drawPlatforms() {
      ctx.fillStyle = '#ffb6c1';
      platforms.forEach(p => {
        ctx.fillRect(p.x - cameraX, p.y, p.width, p.height);
      });
    }

    let cameraX = 0;

    function update() {
      // Movement
      if (keys.left) princess.vx = -princess.speed;
      else if (keys.right) princess.vx = princess.speed;
      else princess.vx = 0;

      // Jump
      if (keys.jump && princess.onGround) {
        princess.vy = princess.jumpStrength;
        princess.onGround = false;
      }

      // Apply gravity
      princess.vy += gravity;
      princess.x += princess.vx;
      princess.y += princess.vy;

      // Collision
      princess.onGround = false;
      platforms.forEach(p => {
        if (
          princess.x + princess.width > p.x && princess.x < p.x + p.width &&
          princess.y + princess.height > p.y && princess.y + princess.height < p.y + p.height &&
          princess.vy >= 0
        ) {
          princess.y = p.y - princess.height;
          princess.vy = 0;
          princess.onGround = true;
        }
      });

      // Camera follows princess
      cameraX = princess.x - 100;
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawPlatforms();
      ctx.fillStyle = princess.color;
      ctx.fillRect(princess.x - cameraX, princess.y, princess.width, princess.height);
    }

    function gameLoop() {
      update();
      draw();
      requestAnimationFrame(gameLoop);
    }

    // Touch Controls
    document.getElementById('left').addEventListener('touchstart', () => keys.left = true);
    document.getElementById('left').addEventListener('touchend', () => keys.left = false);
    document.getElementById('right').addEventListener('touchstart', () => keys.right = true);
    document.getElementById('right').addEventListener('touchend', () => keys.right = false);
    document.getElementById('jump').addEventListener('touchstart', () => keys.jump = true);
    document.getElementById('jump').addEventListener('touchend', () => keys.jump = false);

    gameLoop();
  </script>
</body>
</html>
